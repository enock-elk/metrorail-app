<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Next Train Tool: Get Tailwind</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: system-ui, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f3f4f6; color: #1f2937; }
        .card { background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); text-center; max-width: 400px; }
        h1 { margin-bottom: 1rem; color: #1d4ed8; font-weight: 900; }
        p { margin-bottom: 1.5rem; color: #4b5563; font-size: 0.9rem; line-height: 1.5; }
        button { background: #2563eb; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: bold; cursor: pointer; transition: background 0.2s; display: flex; align-items: center; justify-content: center; width: 100%; }
        button:hover { background: #1d4ed8; }
        button:disabled { background: #9ca3af; cursor: not-allowed; }
        .status { margin-top: 1rem; font-size: 0.8rem; font-weight: bold; }
        .success { color: #059669; }
        .error { color: #dc2626; }
        .hidden { display: none; }
        .fallback { margin-top: 1.5rem; text-align: left; background: #fffbeb; border: 1px solid #fcd34d; padding: 1rem; border-radius: 0.5rem; font-size: 0.85rem; }
        .fallback a { color: #2563eb; font-weight: bold; text-decoration: underline; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Phase 3: Localize Tailwind</h1>
        <p>This tool will download the Tailwind CSS engine script so your app looks perfect even when offline.</p>
        
        <button id="downloadBtn" onclick="downloadTailwind()">
            <svg style="width:20px;height:20px;margin-right:8px" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
            Download tailwind.js
        </button>
        <div id="status" class="status"></div>

        <!-- Fallback Instructions (Hidden by default) -->
        <div id="fallback" class="fallback hidden">
            <p style="font-weight:bold; color:#92400e; margin-bottom:0.5rem;">⚠️ Auto-download blocked?</p>
            <p style="margin-bottom:0.5rem;">Browsers restrict downloads from local files. Please do this manually:</p>
            <ol style="padding-left: 1.2rem; line-height: 1.6;">
                <li><a href="https://cdn.tailwindcss.com" target="_blank">Right-click this link</a></li>
                <li>Select <strong>"Save Link As..."</strong> (or "Save Target As")</li>
                <li>Navigate to your project's <strong>js/</strong> folder</li>
                <li>Name the file <strong>tailwind.js</strong></li>
                <li>Click <strong>Save</strong></li>
            </ol>
        </div>
    </div>

    <script>
        async function downloadTailwind() {
            const btn = document.getElementById('downloadBtn');
            const status = document.getElementById('status');
            const fallback = document.getElementById('fallback');
            
            btn.disabled = true;
            btn.innerHTML = 'Downloading...';
            status.textContent = '';
            fallback.classList.add('hidden');

            try {
                const response = await fetch('https://cdn.tailwindcss.com');
                if (!response.ok) throw new Error('Network error');
                
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.style.display = 'none';
                a.href = url;
                a.download = 'tailwind.js';
                
                document.body.appendChild(a);
                a.click();
                
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                btn.innerHTML = 'Download Complete!';
                btn.style.backgroundColor = '#059669';
                status.textContent = '✅ Success! Move this file to your "js/" folder.';
                status.className = 'status success';
                
            } catch (error) {
                console.error(error);
                btn.disabled = false;
                btn.innerHTML = 'Try Manual Method';
                status.textContent = '⚠️ Browser blocked auto-download.';
                status.className = 'status error';
                fallback.classList.remove('hidden'); // Show manual instructions
            }
        }
    </script>
</body>
</html>